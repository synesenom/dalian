<div id="desc">
  <p>
    The Color component manages color palettes and color scheme policies for widgets. Furthermore, the component can
    simulate various color vision deficiencies to test and prepare your charts for the highest accessibility.
    <br><br>Press the following keys or click on the buttons to explore the API. Letters correspond to the color palette
    methods, numbers toggle different color vision deficiencies. Percentages show the prevalence of the corresponding
    deficiency (or the lack thereof) among people.
  </p>
  <ul id="colors">
    <li onclick="defaultColors()"><span class="button radio on">D</span>- Default color palette (<code>wong</code>).</li>
    <li onclick="constantColor()"><span class="button radio">S</span>- Single color.</li>
    <li onclick="plotSpecificColor()"><span class="button radio">P</span>- Plot specific color.</li>
    <li onclick="transformedColor()"><span class="button radio">T</span>- Transformed color.</li>
  </ul>
  <div class="controls-title">Color vision deficiencies:</div>
  <ul id="deficiencies" style="margin: 0">
    <li onclick="normal()"><span class="button radio on">0</span>- Normal vision (92%).</li>
    <li onclick="deuteranomaly()"><span class="button radio">1</span>- Deuteranomaly (2.7%).</li>
    <li onclick="protanomaly()"><span class="button radio">2</span>- Protanomaly (0.66%).</li>
    <li onclick="protanopia()"><span class="button radio">3</span>- Protanopia (0.59%).</li>
    <li onclick="deuteranopia()"><span class="button radio">4</span>- Deuteranopia (0.56%).</li>
    <li onclick="tritanopia()"><span class="button radio">5</span>- Tritanopia (0.016%).</li>
    <li onclick="tritanomaly()"><span class="button radio">6</span>- Tritanomaly (0.01%).</li>
    <li onclick="achromatomaly()"><span class="button radio">7</span>- Achromatomaly (< 0.0001%).</li>
    <li onclick="achromatopsia()"><span class="button radio">8</span>- Achromatopsia (< 0.0001%).</li>
  </ul>
</div>

<script class="card-example">
dalian.BarChart('color-card', '#color')
  .data(Array.from({ length: 5 }, (d, i) => ({
    name: 'plot' + (i + 1),
    value: (i * 7) % 5 + 1
  })))
  .x(0)
  .y(0)
  .width(WIDTH)
  .height(HEIGHT)
  .margins({ left: 30, right: 2, top: 20, bottom: 30 })
  .color.palette('royalblue')
  .font.size(11)
  .font.color('#ccc')
  .bottomAxis.label('X')
  .leftAxis.label('Y')
  .render()
</script>

<script class="doc">
// generate data
function getData () {
  return Array.from({ length: 9 }, (d, i) => ({
    name: 'ABCDEFGH'.charAt(i),
    value: (i * 13) % 9 + 1
  }))
}
</script>

<script class="doc">
// create chart
const chart = dalian.BarChart('myChart', '#widget')
  .data(getData().slice(0, 8))
  .width(600)
  .height(300)
  .margins(40)
  .font.size(14)
  .bottomAxis.label('X')
  .leftAxis.label('Y')
  .render()
</script>

<script class="doc">
// api methods
let defaultColors = () => chart.color.palette().render(1000)

let constantColor = () => chart.color.palette('royalblue').render(1000)

let plotSpecificColor = () => chart.color.palette({
  A: '#1f77b4',
  B: '#ff7f0e',
  C: '#2ca02c',
  D: '#d62728',
  E: '#9467bd',
  F: '#8c564b',
  G: '#e377c2',
  H: '#7f7f7f'
}).render(1000)

let transformedColor = () => chart.color.palette({
  vowel: 'royalblue',
  consonant: 'firebrick'
}, name => ['A', 'E'].indexOf(name) > -1 ? 'vowel' : 'consonant').render(1000)

let normal = () => chart.color.deficiency().render()
let protanopia = () => chart.color.deficiency('protanopia').render()
let protanomaly = () => chart.color.deficiency('protanomaly').render()
let deuteranopia = () => chart.color.deficiency('deuteranopia').render()
let deuteranomaly = () => chart.color.deficiency('deuteranomaly').render()
let tritanopia = () => chart.color.deficiency('tritanopia').render()
let tritanomaly = () => chart.color.deficiency('tritanomaly').render()
let achromatopsia = () => chart.color.deficiency('achromatopsia').render()
let achromatomaly = () => chart.color.deficiency('achromatomaly').render()
</script>

<script class="doc-hidden">
// Modify radio buttons
[defaultColors, constantColor, plotSpecificColor, transformedColor] = radio('colors',
  [defaultColors, constantColor, plotSpecificColor, transformedColor]);
[normal, deuteranomaly, protanomaly, protanopia, deuteranopia, tritanopia, tritanomaly, achromatomaly,
  achromatopsia] = radio('deficiencies', [normal, deuteranomaly, protanomaly, protanopia, deuteranopia, tritanopia,
  tritanomaly, achromatomaly, achromatopsia])
</script>

<script class="doc">
// update data on keypress
window.addEventListener('keydown', e => {
  switch (e.key) {
    case 'd':
      defaultColors()
      break
    case 'c':
      constantColor()
      break
    case 'p':
      plotSpecificColor()
      break
    case 't':
      transformedColor()
      break
    case '0':
      normal()
      break
    case '1':
      deuteranomaly()
      break
    case '2':
      protanomaly()
      break
    case '3':
      protanopia()
      break
    case '4':
      deuteranopia()
      break
    case '5':
      tritanopia()
      break
    case '6':
      tritanomaly()
      break
    case '7':
      achromatomaly()
      break
    case '8':
      achromatopsia()
      break
    default:
      break
  }
})
</script>
