<div id="desc">
  <p>
    The Color component manages color palettes and color scheme policies for widgets. Furthermore, the component can
    simulate various color vision deficiencies to test and prepare your charts for the highest accessibility.
  </p>
</div>

<div id="controls">
  <ul id="colors">
    <li id="changeColorPalette" onclick="changeColorPalette()">P - Default color palette.</li>
    <li id="changeColorDeficiency" onclick="changeColorDeficiency()">D - Normal vision (92%).</li>
  </ul>
</div>

<script class="card-example">
dalian.BarChart('color-card', '#color')
  .data(Array.from({ length: 5 }, (d, i) => ({
    name: 'ABCDE'.charAt(i),
    value: (i * 7) % 5 + 1
  })))
  .x(0)
  .y(0)
  .width(WIDTH)
  .height(HEIGHT)
  .margins({ left: 30, right: 2, top: 20, bottom: 30 })
  .color.palette('royalblue')
  .font.size(11)
  .font.color('#ccc')
  .bottomAxis.label('X')
  .leftAxis.label('Y')
  .render()
</script>

<script class="doc">
// generate data
function getData () {
  return Array.from({ length: 9 }, (d, i) => ({
    name: 'ABCDEFGH'.charAt(i),
    value: (i * 13) % 9 + 1
  }))
}
</script>

<script class="doc">
// create chart
const chart = dalian.BarChart('myChart', '#widget')
  .data(getData().slice(0, 8))
  .width(600)
  .height(300)
  .margins(40)
  .font.size(14)
  .bottomAxis.label('X')
  .leftAxis.label('Y')
  .render()
</script>

<script class="doc">
// api methods
let palettes = [
  undefined,          // Default palette.
  'palette-light',    // Built-in palette light.
  'royalblue',        // Single color.
  { A: '#1f77b4',     // Plot name specific.
    B: '#ff7f0e',
    C: '#2ca02c',
    D: '#d62728',
    E: '#9467bd',
    F: '#8c564b',
    G: '#e377c2',
    H: '#7f7f7f' }
]
let changeColorPalette = () => {
  this.p = ((this.p || 0) + 1) % 4
  chart.color.palette(palettes[this.p]).render(1000)
}

let deficiencies = [
  undefined,
  'deuteranomaly',
  'protanomaly',
  'protanopia',
  'deuteranopia',
  'tritanopia',
  'tritanomaly',
  'achromatomaly',
  'achromatopsia'
]
let changeColorDeficiency = () => {
  this.d = ((this.d || 0) + 1) % 9
  chart.color.deficiency(deficiencies[this.d]).render()
}
</script>

<script class="doc-hidden">
// Modify buttons
changeColorPalette = state(changeColorPalette, 'p', [
  'Default palette',
  'Built-in palette light',
  'Single color',
  'Plot specific color'
])
changeColorDeficiency = state(changeColorDeficiency, 'd', [
  'Normal vision (92%)',
  'Deuteranomaly (2.7%)',
  'Protanomaly (0.66%)',
  'Protanopia (0.59%)',
  'Deuteranopia (0.56%)',
  'Tritanopia (0.016%)',
  'Tritanomaly (0.01%)',
  'Achromatomaly (< 0.0001%)',
  'Achromatopsia (< 0.0001%)'
])
</script>

<script class="doc">
// update data on keypress
window.addEventListener('keydown', e => {
  switch (e.key) {
    case 'p':
      changeColorPalette()
      break
    case 'd':
      changeColorDeficiency()
      break
    default:
      break
  }
})
</script>
