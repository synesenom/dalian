<script class="card-example">
  dalian.Heatmap('heatmap-card', '#heatmap')
    .data((() => {
      const normal1 = new ranjs.dist.Normal(7, 2)
      const normal2 = new ranjs.dist.Normal(1, 3)

      return Array.from({length: 1e5}, () => {
        return Math.random() < 0.3 ? {
          x: normal1.sample(),
          y: normal2.sample()
        } : {
          x: normal2.sample(),
          y: normal1.sample()
        }
      })
    })())
    .x(0)
    .y(0)
    .width(WIDTH)
    .height(HEIGHT)
    .margins({ left: 30, right: 10, top: 20, bottom: 30 })
    .font.size(11)
    .color.palette(COLORS.widget[0])
    .bottomAxis.label('x')
    .leftAxis.label('y')
    .radius(20)
    .render()
</script>

<div id="desc">
  <p>
    <a href="https://en.wikipedia.org/wiki/Bubble_chart">Heatmaps</a> TODO Desc
  </p>
  <p>
    When should be used
  </p>
  <p>
    When should be avoided.
  </p>
    <!-- TODO Data types: x: continuous, y: continuous.-->
</div>
<div id="controls">
  <ul>
    <li onclick="changeData()">.data()</li>
    <li onclick="toggleGrid()">.grid()</li>
  </ul>
</div>

<script class="doc">
// generate data
function getData () {
  const normal1 = new ranjs.dist.Normal(Math.random() < 0.5 ? 7 : -2, 2)
  const normal2 = new ranjs.dist.Normal(1, 3)

  return Array.from({length: 1e5}, () => {
    return Math.random() < 0.5 ? {
      x: normal1.sample(),
      y: normal2.sample()
    } : {
      x: normal2.sample(),
      y: normal1.sample()
    }
  })
}
</script>

<script class="doc">
// create chart
const heatmap = dalian.Heatmap('heatmap', '#widget')
  .data(getData())
  .width(WIDTH)
  .height(HEIGHT)
  .margins({left: 70, top: 40, bottom: 40, right: 40})
  .font.size(14)
  .bottomAxis.label('x')
  .leftAxis.label('y')
  //.tooltip.on(true)
  //.tooltip.valueFormat(y => y.toFixed(2))
  .render(1000)
</script>

<script class="doc">
// api methods
const changeData = () => heatmap.data(getData()).render(1000)

const toggleGrid = () => {
  this.g = 1 - (this.g || 0)
  heatmap.grid(this.g ? [60, 40] : [100, 100])
    .render()
}
</script>
