<script class="card-example">
  dalian.BulletChart('bullet-chart-card', '#bullet-chart')
    .x(0)
    .y(0)
    .width(WIDTH)
    .height(HEIGHT)
    .margins({left: 60, bottom: 10, right: 10})
    .font.size(11)
    .thickness(18)
    .value(23)
    .forecast(4)
    .target(85)
    .label('KPI')
    .unit('# Hugs')
    .valueColor(COLORS.widget[0])
    .render()
</script>

<div id="desc">
  <p>
    A <a href="https://en.wikipedia.org/wiki/Bullet_graph">bullet chart</a> as designed by
    Stephen Few shows a single value against a target on top of quantitative scale with three qualitative states. It optionally has a forecast value as well.
  </p>
  <p>
    Bullet charts are useful to visualize the <span class="good">state of a metric</span> (say a KPI) in <span class="good">comparison to goals</span> and help the reader interpret the value easily.
  </p>
  <p>
    As a limitation it can only show a <span class="bad">single value</span>.
    <!-- TODO Data types: x: continuous -->
  </p>
</div>
<div id="controls">
  <ul>
    <li onclick="changeForecast()">.forecast()</li>
    <li onclick="toggleLabel()">.label()</li>
    <li onclick="toggleRangeColor()">.rangeColor()</li>
    <li onclick="changeRanges()">.ranges()</li>
    <li onclick="changeTarget()">.target()</li>
    <li onclick="toggleThickness()">.thickness()</li>
    <li onclick="toggleUnit()">.unit()</li>
    <li onclick="changeValue()">.value()</li>
    <li onclick="toggleValueColor()">.valueColor()</li>
  </ul>
</div>

<script class="doc">
// create chart
const bulletChart = dalian.BulletChart('bullet-chart', '#widget')
  .width(WIDTH)
  .height(HEIGHT)
  .margins({left: 130, right: 40, bottom: 30})
  .font.size(14)
  .value(23)
  .forecast(4)
  .target(90)
  .label('Success')
  .unit('Minutes of smile')
  //.vertical(true)
  .render()
</script>

<script class="doc">
// api methods
const changeForecast = () => bulletChart
  .forecast(4 * Math.random())
  .render(1000)

const toggleLabel = () => {
  this.l = 1 - (this.l || 0)
  bulletChart.label(this.l ? '' : 'Success').render()
}

const toggleRangeColor = () => {
  this.s = 1 - (this.s || 0)
  bulletChart.rangeColor(this.s ? 'goldenrod' : undefined)
    .render(1000)
}

const changeRanges = () => bulletChart.ranges([
  0,
  40 + 20 * Math.random(),
  70 + 20 * Math.random(),
  100]).render(1000)

const changeTarget = () => bulletChart
  .target(80 + 20 * Math.random())
  .render(1000)

const toggleThickness = () => {
  this.w = 1 - (this.w || 0)
  bulletChart.thickness(this.w ? 50 : undefined).render(1000)
}

const toggleUnit = () => {
  this.u = 1 - (this.u || 0)
  bulletChart.unit(this.u ? '' : 'Minutes of smile').render()
}

const changeValue = () => bulletChart.value(100 * Math.random())
        .render(1000)

const toggleValueColor = () => {
  this.c = 1 - (this.c || 0)
  bulletChart.valueColor(this.c ? 'royalblue' : undefined)
          .render(1000)
}
</script>
